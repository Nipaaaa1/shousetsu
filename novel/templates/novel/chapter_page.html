{% extends "base.html" %}
{% load static wagtailcore_tags wagtailimages_tags %}

{% block content %}
<main class="max-w-3xl mx-auto px-6 py-20 space-y-16">

  <header class="space-y-4 text-center">
    <p class="text-sm opacity-60">
      Chapter {{ page.chapter_number|default:"?" }}
    </p>

    <h1 class="text-4xl md:text-5xl font-bold leading-tight">
      {{ page.title }}
    </h1>

    <p class="text-sm opacity-60">
    ~{{ page.reading_time }} menit baca
    </p>
  </header>

  {% if page.thumbnail %}
  <figure class="space-y-2">
    {% image page.thumbnail format-webp class="w-full rounded-2xl" %}
    <figcaption class="text-xs text-center opacity-60">
      Ilustrasi pembuka chapter
    </figcaption>
  </figure>
  {% endif %}

  <article
    class="prose prose-neutral prose-lg max-w-none font-serif leading-relaxed"
  >
    {{ page.content|richtext }}
  </article>

  {% if page.postscript %}
  <section class="border-t border-base-300 pt-10 space-y-4">
    <h2 class="text-lg font-semibold">
      Catatan Penulis
    </h2>

    <div class="prose prose-neutral max-w-none font-serif text-sm opacity-90">
      {{ page.postscript|richtext }}
    </div>
  </section>
  {% endif %}

  {% if page.get_parent %}
  <a
    href="{{ page.get_parent.url }}"
    class="inline-flex items-center gap-2 text-sm link link-hover opacity-80"
  >
    ← Kembali ke detail Arc
  </a>
{% endif %}

  <nav
    class="flex items-center justify-between gap-6 pt-16 border-t border-base-300"
  >
    <div>
      {% if page.prev_chapter %}
      <a
        href="{{ page.prev_chapter.url }}"
        class="group inline-flex flex-col gap-1 link link-hover"
      >
        <span class="text-xs opacity-60">← Chapter sebelumnya</span>
        <span class="font-medium">
          {{ page.prev_chapter.title }}
        </span>
      </a>
      {% endif %}
    </div>

    <div class="text-right">
      {% if page.next_chapter %}
      <a
        href="{{ page.next_chapter.url }}"
        class="group inline-flex flex-col gap-1 link link-hover"
      >
        <span class="text-xs opacity-60">Chapter selanjutnya →</span>
        <span class="font-medium">
          {{ page.next_chapter.title }}
        </span>
      </a>
      {% endif %}
    </div>
  </nav>

</main>
{% endblock content %}
